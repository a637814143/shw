import{d as x,r as v,c as i,a as p,b as s,w as g,e as m,f as u,v as f,g as y,t as h,u as V,o as d}from"./index-e4XwfIcH.js";import{_}from"./_plugin-vue_export-helper-DlAUqK2U.js";const b={class:"register-container"},U={class:"register-form"},M={class:"input-group"},S={class:"input-group"},B={class:"input-group"},N={class:"input-group"},P={key:0,class:"error-message"},R={key:1,class:"success-message"},T=["disabled"],j={key:0},q={key:1},D={class:"login-link"},I=x({__name:"RegisterView",setup(J){const w=V(),t=v({username:"",password:"",confirmPassword:"",role:"user"}),l=v(!1),r=v(""),n=v(""),k=async()=>{if(r.value="",n.value="",!t.value.username.trim()){r.value="请输入账号";return}if(!t.value.password.trim()){r.value="请输入密码";return}if(t.value.password!==t.value.confirmPassword){r.value="密码确认不匹配";return}if(t.value.password.length<6){r.value="密码长度至少6位";return}l.value=!0;try{await new Promise(c=>setTimeout(c,1e3)),console.log("注册数据:",t.value);const a={username:t.value.username,password:t.value.password,role:t.value.role},e=JSON.parse(localStorage.getItem("registeredUsers")||"[]");if(e.find(c=>c.username===a.username)){r.value="用户名已存在，请选择其他用户名";return}e.push(a),localStorage.setItem("registeredUsers",JSON.stringify(e)),n.value="注册成功！请使用新账号登录",setTimeout(()=>{w.replace("/login")},1500)}catch(a){r.value="注册失败，请稍后重试",console.error("注册错误:",a)}finally{l.value=!1}},C=()=>{w.push("/login")};return(a,e)=>(d(),i("div",b,[e[11]||(e[11]=p('<div class="background-decoration" data-v-eefde1c1><div class="candle candle-1" data-v-eefde1c1></div><div class="candle candle-2" data-v-eefde1c1></div><div class="plate" data-v-eefde1c1><div class="pancakes" data-v-eefde1c1></div><div class="fork" data-v-eefde1c1></div></div><div class="banana-dish" data-v-eefde1c1><div class="banana" data-v-eefde1c1></div><div class="string" data-v-eefde1c1></div></div><div class="mug" data-v-eefde1c1></div><div class="plant" data-v-eefde1c1></div><div class="tablecloth" data-v-eefde1c1></div></div>',1)),s("div",U,[e[10]||(e[10]=s("h1",{class:"form-title"},"欢迎注册",-1)),s("form",{onSubmit:g(k,["prevent"]),class:"form"},[s("div",M,[e[4]||(e[4]=s("div",{class:"input-icon"},[s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),s("circle",{cx:"12",cy:"7",r:"4",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),u(s("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>t.value.username=o),placeholder:"请输入账号",class:"form-input",required:""},null,512),[[f,t.value.username]])]),s("div",S,[e[5]||(e[5]=p('<div class="input-icon" data-v-eefde1c1><svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-eefde1c1><rect x="3" y="11" width="18" height="11" rx="2" ry="2" stroke="currentColor" stroke-width="2" data-v-eefde1c1></rect><circle cx="12" cy="16" r="1" stroke="currentColor" stroke-width="2" data-v-eefde1c1></circle><path d="M7 11V7C7 5.67392 7.52678 4.40215 8.46447 3.46447C9.40215 2.52678 10.6739 2 12 2C13.3261 2 14.5979 2.52678 15.5355 3.46447C16.4732 4.40215 17 5.67392 17 7V11" stroke="currentColor" stroke-width="2" data-v-eefde1c1></path></svg></div>',1)),u(s("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=o=>t.value.password=o),placeholder:"请输入密码",class:"form-input",required:""},null,512),[[f,t.value.password]])]),s("div",B,[e[6]||(e[6]=p('<div class="input-icon" data-v-eefde1c1><svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-eefde1c1><rect x="3" y="11" width="18" height="11" rx="2" ry="2" stroke="currentColor" stroke-width="2" data-v-eefde1c1></rect><circle cx="12" cy="16" r="1" stroke="currentColor" stroke-width="2" data-v-eefde1c1></circle><path d="M7 11V7C7 5.67392 7.52678 4.40215 8.46447 3.46447C9.40215 2.52678 10.6739 2 12 2C13.3261 2 14.5979 2.52678 15.5355 3.46447C16.4732 4.40215 17 5.67392 17 7V11" stroke="currentColor" stroke-width="2" data-v-eefde1c1></path></svg></div>',1)),u(s("input",{type:"password","onUpdate:modelValue":e[2]||(e[2]=o=>t.value.confirmPassword=o),placeholder:"请确认密码",class:"form-input",required:""},null,512),[[f,t.value.confirmPassword]])]),s("div",N,[u(s("select",{"onUpdate:modelValue":e[3]||(e[3]=o=>t.value.role=o),class:"form-select"},[...e[7]||(e[7]=[s("option",{value:"user"},"用户",-1),s("option",{value:"provider"},"家政人员",-1)])],512),[[y,t.value.role]]),e[8]||(e[8]=s("div",{class:"select-arrow"},[s("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("polyline",{points:"6,9 12,15 18,9",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1))]),r.value?(d(),i("div",P,h(r.value),1)):m("",!0),n.value?(d(),i("div",R,h(n.value),1)):m("",!0),s("button",{type:"submit",class:"register-btn",disabled:l.value},[l.value?(d(),i("span",j,"注册中...")):(d(),i("span",q,"注册"))],8,T),s("div",D,[e[9]||(e[9]=s("span",null,"已有账号?",-1)),s("a",{href:"#",onClick:g(C,["prevent"]),class:"login-text"},"请登录")])],32)])]))}}),E=_(I,[["__scopeId","data-v-eefde1c1"]]);export{E as default};
