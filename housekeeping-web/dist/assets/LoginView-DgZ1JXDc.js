import{d as x,r as v,c as l,a as m,b as s,w as f,e as C,f as c,v as g,g as y,t as V,u as _,o as d}from"./index-e4XwfIcH.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";const U={class:"login-container"},I={class:"login-form"},B={class:"input-group"},M={class:"input-group"},N={class:"input-group"},D={key:0,class:"error-message"},L=["disabled"],T={key:0},j={key:1},O={class:"register-link"},q=x({__name:"LoginView",setup(E){const n=_(),o=v({username:"",password:"",role:"user"}),i=v(!1),r=v(""),w=()=>{const t=[{username:"user",password:"123456",role:"user"},{username:"admin",password:"admin123",role:"admin"},{username:"provider",password:"provider123",role:"provider"},{username:"test",password:"test123",role:"user"}],e=JSON.parse(localStorage.getItem("registeredUsers")||"[]"),a=[...t];return e.forEach(u=>{const p=a.findIndex(k=>k.username===u.username);p!==-1?a[p]=u:a.push(u)}),a},h=async()=>{if(r.value="",!o.value.username.trim()){r.value="请输入账号";return}if(!o.value.password.trim()){r.value="请输入密码";return}i.value=!0;try{await new Promise(a=>setTimeout(a,1e3));const e=w().find(a=>a.username===o.value.username&&a.password===o.value.password&&a.role===o.value.role);e?(localStorage.setItem("userInfo",JSON.stringify({username:e.username,role:e.role,loginTime:new Date().toISOString()})),console.log("登录成功:",e),e.role==="provider"?n.replace("/provider-home"):n.replace("/user-home")):r.value="账号、密码或角色不正确，请重新输入"}catch(t){r.value="登录失败，请稍后重试",console.error("登录错误:",t)}finally{i.value=!1}},b=()=>{n.push("/register")};return(t,e)=>(d(),l("div",U,[e[9]||(e[9]=m('<div class="background-decoration" data-v-1f5b4ade><div class="candle candle-1" data-v-1f5b4ade></div><div class="candle candle-2" data-v-1f5b4ade></div><div class="plate" data-v-1f5b4ade><div class="pancakes" data-v-1f5b4ade></div><div class="fork" data-v-1f5b4ade></div></div><div class="banana-dish" data-v-1f5b4ade><div class="banana" data-v-1f5b4ade></div><div class="string" data-v-1f5b4ade></div></div><div class="mug" data-v-1f5b4ade></div><div class="tablecloth" data-v-1f5b4ade></div></div>',1)),s("div",I,[e[8]||(e[8]=s("h1",{class:"form-title"},"家政服务平台",-1)),s("form",{onSubmit:f(h,["prevent"]),class:"form"},[s("div",B,[e[3]||(e[3]=s("div",{class:"input-icon"},[s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),s("circle",{cx:"12",cy:"7",r:"4",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),c(s("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>o.value.username=a),placeholder:"请输入账号",class:"form-input",required:""},null,512),[[g,o.value.username]])]),s("div",M,[e[4]||(e[4]=m('<div class="input-icon" data-v-1f5b4ade><svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-1f5b4ade><rect x="3" y="11" width="18" height="11" rx="2" ry="2" stroke="currentColor" stroke-width="2" data-v-1f5b4ade></rect><circle cx="12" cy="16" r="1" stroke="currentColor" stroke-width="2" data-v-1f5b4ade></circle><path d="M7 11V7C7 5.67392 7.52678 4.40215 8.46447 3.46447C9.40215 2.52678 10.6739 2 12 2C13.3261 2 14.5979 2.52678 15.5355 3.46447C16.4732 4.40215 17 5.67392 17 7V11" stroke="currentColor" stroke-width="2" data-v-1f5b4ade></path></svg></div>',1)),c(s("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=a=>o.value.password=a),placeholder:"请输入密码",class:"form-input",required:""},null,512),[[g,o.value.password]])]),s("div",N,[c(s("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>o.value.role=a),class:"form-select"},[...e[5]||(e[5]=[s("option",{value:"admin"},"管理员",-1),s("option",{value:"user"},"用户",-1),s("option",{value:"provider"},"家政人员",-1)])],512),[[y,o.value.role]]),e[6]||(e[6]=s("div",{class:"select-arrow"},[s("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("polyline",{points:"6,9 12,15 18,9",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1))]),r.value?(d(),l("div",D,V(r.value),1)):C("",!0),s("button",{type:"submit",class:"login-btn",disabled:i.value},[i.value?(d(),l("span",T,"登录中...")):(d(),l("span",j,"登录"))],8,L),s("div",O,[e[7]||(e[7]=s("span",null,"还没有账号?",-1)),s("a",{href:"#",onClick:f(b,["prevent"]),class:"register-text"},"请注册")])],32)])]))}}),A=S(q,[["__scopeId","data-v-1f5b4ade"]]);export{A as default};
